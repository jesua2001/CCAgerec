<app-header></app-header>
<ion-content class="ion-padding" scroll-y="true">

  <!-- Input para buscar por certificado -->
  <ion-item>
    <ion-label position="floating">Introduce el numero de serie </ion-label>
    <ion-input
      [(ngModel)]="Nserie"
      name="certificadoInput"
      type="text"
      autofocus>
    </ion-input>
  </ion-item>

  <ion-button expand="block" (click)="buscarCaja()">Buscar Caja</ion-button>

  <!-- Mensajes -->
  <ion-text color="danger" *ngIf="error">
    <p class="ion-padding">{{ error }}</p>
  </ion-text>

  <ion-text color="success" *ngIf="mensaje">
    <p class="ion-padding">{{ mensaje }}</p>
  </ion-text>

  <!-- Mostrar formulario SOLO si hay caja -->
  <ion-card *ngIf="caja">
    <ion-card-header>
      <ion-card-title>Datos de la Caja</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form (ngSubmit)="modificarCaja()">
        <ng-container *ngFor="let clave of editableKeys">
          <ion-item>
            <ion-label position="stacked" style="color: #01BF73; padding-bottom: 8px; font-size: 20px; ">{{ clave }}</ion-label>
            <ion-input
              [(ngModel)]="caja[clave]"
              [name]="'campo_' + clave"
              [type]="isNumber(caja[clave]) ? 'number' : 'text'"
              [placeholder]="'Introduce ' + clave.toLowerCase()">
            </ion-input>
          </ion-item>
        </ng-container>

        <ion-button expand="block" type="submit">Guardar Cambios</ion-button>
      </form>
    </ion-card-content>
  </ion-card>

</ion-content>
