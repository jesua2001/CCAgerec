<ion-content class="ion-padding" scroll-y="true">

<!-- Input para buscar por certificado -->
  <ion-item>
    <ion-label position="floating">Certificado</ion-label>
    <ion-input
      [(ngModel)]="certificado"
      name="certificadoInput"
      type="text"
      autofocus>
    </ion-input>
  </ion-item>

  <ion-button expand="block" (click)="buscarCaja()">Buscar Caja</ion-button>

  <!-- Mensajes -->
  <ion-text color="danger" *ngIf="error">
    <p class="ion-padding">{{ error }}</p>
  </ion-text>

  <ion-text color="success" *ngIf="mensaje">
    <p class="ion-padding">{{ mensaje }}</p>
  </ion-text>

  <!-- Mostrar formulario SOLO si hay caja -->
  <ion-card *ngIf="caja">
    <ion-card-header>
      <ion-card-title>Datos de la Caja</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form (ngSubmit)="modificarCaja()">
        <ng-container *ngFor="let entry of objectEntries(caja); trackBy: trackByClave">
          <ion-item *ngIf="esEditable(entry.clave)">
            <ion-label position="floating">{{ entry.clave }}</ion-label>
            <ion-input
              [(ngModel)]="caja[entry.clave]"
              [name]="entry.clave"
              [type]="isNumber(entry.valor) ? 'number' : 'text'">
            </ion-input>
          </ion-item>
        </ng-container>


        <ion-button expand="block" type="submit">Guardar Cambios</ion-button>
      </form>
    </ion-card-content>
  </ion-card>

</ion-content>
