<app-header></app-header>

<ion-content class="ion-padding" scroll-y="true">
  <div class="container py-5">
    <div class="d-flex justify-content-center">
      <div class="card w-100" style="max-width: 600px; border: 1px solid #ccc;">
        <div class="card-body p-4">

          <h1 class="text-center mb-4" style="font-size: 2rem; font-weight: bold; color: #222;">
            Consulta de Caja
          </h1>

          <!-- Input del número de serie -->
          <ion-item>
            <ion-label position="stacked" style="font-weight: 600; color: #006d57;">Número de Serie</ion-label>
            <ion-input
              type="text"
              [(ngModel)]="Nserie"
              name="certificadoInput"
              placeholder="Ej: 12345678"
              autofocus>
            </ion-input>
          </ion-item>

          <!-- Botón buscar -->
          <ion-button expand="block" color="success" (click)="buscarCaja()" class="my-3">
            Buscar Caja
          </ion-button>

          <!-- Mensajes -->
          <div *ngIf="error" class="text-danger text-center mt-4">
            {{ error }}
          </div>

          <div *ngIf="mensaje" class="text-success text-center mt-4">
            {{ mensaje }}
          </div>

          <!-- Datos de la caja -->
          <div *ngIf="caja" class="mt-5">
            <div class="card" style="border: 1px solid #ccc;">
              <div class="card-header">
                <h3 style="font-weight: bold;">Editar Datos de la Caja</h3>
              </div>
              <div class="card-body" style="max-height: 50vh; overflow-y: auto;">
                <form (ngSubmit)="modificarCaja()">
                  <ng-container *ngFor="let clave of editableKeys">
                    <ion-item>
                      <ion-label position="stacked" style="font-weight: 600; color: #006d57;">
                        {{ clave }}
                      </ion-label>
                      <ion-input
                        type="text"
                        [value]="caja[clave]"
                        (ionInput)="caja[clave] = $event.target.value"
                        [name]="'campo_' + clave"
                        [placeholder]="'Introduce ' + clave.toLowerCase()">
                      </ion-input>
                    </ion-item>
                  </ng-container>
                  <ion-button type="submit" expand="block" color="success" class="mt-3">
                    Guardar Cambios
                  </ion-button>
                </form>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</ion-content>
